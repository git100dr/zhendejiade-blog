---
title: 第二天 域名解析
date: '2025-8-9'
tags: ['note', 'build', 'domain']
draft: false
summary: Day 2 继续
---

## 域名解析

**工作原理**：

    获取域名，让所有用户均能通过该域名访问你的网站；将域名托管到域名解析服务商，将域名转换为机器可读的 IP 地址，直达你网站所在地址。

**域名解析的几个关键角色**

    在域名解析过程中，有四个主要的服务器角色协同工作：

    **递归解析器** (Recursive Resolver)：你的电脑、手机或路由器上配置的 DNS 服务器。当你输入一个域名时，它首先向这个服务器发起请求。它的职责是代表你完成整个解析过程，并返回最终结果。常见的递归解析器有 Google 的 8.8.8.8 和 Cloudflare 的 1.1.1.1。

    **根域名服务器** (Root Name Server)：位于 DNS 层次结构的顶端。全球只有 13 个根域名服务器（但实际上有很多副本）。当递归解析器不知道某个域名的 IP 地址时，它会首先向根域名服务器询问。根域名服务器会告诉它去哪个顶级域名服务器寻找答案。

    **顶级域名服务器** (TLD Name Server)：负责管理顶级域名（如 .com, .org, .net, .cn 等）的所有信息。根域名服务器会将请求转发给相应的 TLD 服务器。TLD 服务器会告诉递归解析器去哪个权威域名服务器寻找答案。

    **权威域名服务器** (Authoritative Name Server)：这是存储特定域名（如 example.com）的所有 DNS 记录的服务器。当 TLD 服务器将请求转发给它时，它会返回该域名对应的 IP 地址。你的域名注册商（如 GoDaddy, Namecheap）通常会为你提供这个服务。

**域名解析的详细步骤**

    假设你在浏览器中输入 www.example.com：

    用户发起请求：你的电脑首先检查本地 DNS 缓存。如果找到了 www.example.com 的 IP 地址，解析过程结束。如果找不到，它会将请求发送给你的递归解析器。

    递归解析器查询根服务器：递归解析器收到请求后，首先向根域名服务器询问 www.example.com 的地址。根服务器不认识这个域名，但它知道 .com 这个 TLD 服务器的地址，于是返回这个地址。

    递归解析器查询 TLD 服务器：递归解析器拿着 .com TLD 服务器的地址，向它询问 www.example.com 的地址。.com TLD 服务器也不认识这个域名，但它知道 example.com 的权威域名服务器的地址，于是返回这个地址。

    递归解析器查询权威服务器：递归解析器最后向 example.com 的权威域名服务器发起请求。这个权威服务器有所有关于 example.com 的记录，它会查找 www 子域名的 IP 地址，然后返回 IP 地址 93.184.216.34。

    递归解析器返回结果：递归解析器收到最终的 IP 地址后，将其返回给你的电脑。为了提高效率，它还会将这个结果缓存一段时间（TTL）。

    建立连接：你的电脑拿到 IP 地址后，就可以向 93.184.216.34 这个服务器发起连接，请求网站的网页内容。

**配置 Cloudflare**：

    无论你选择哪个平台，配置 Cloudflare 都很简单。在托管服务商（如 Vercel）的后台绑定你的域名后，服务商会提供一个或多个 IP 地址或 CNAME 记录。你只需要到 Cloudflare 的 DNS 设置页面，添加相应的记录，将你的域名解析到这些地址即可。

**流程**：

    1. 获取免费域名：邮箱注册 https://digitalplat.org/， 可免费获取多个免费域名，后缀是 .dpdns.org。免费域名需要每 180 天续期一次。
    2. 绑定IP地址：到Vercel的后台绑定域名后，服务商会提供一个或多个 IP 地址或 CNAME 记录。如A和TXT记录。
    3. 域名解析：将申请的域名托管到Cloudflare，方便管理。添加相应记录。
